

bit32={};local v0=13 + 19 ;local v1=(3 -1)^v0 ;bit32.bnot=function(v22) local v23=0 -0 ;while true do if (v23==(0 + 0)) then v22=v22%v1 ;return (v1-(1 -0)) -v22 ;end end end;bit32.band=function(v24,v25) if (v25==(253 + 2)) then return v24%(1047 -(368 + 423)) ;end if (v25==65535) then return v24%65536 ;end if (v25==(4294967855 -(306 + 254))) then return v24%(6067416177 -1772448881) ;end v24,v25=v24%v1 ,v25%v1 ;local v26=907 -(821 + 86) ;local v27=1 -0 ;for v85=1884 -(1668 + 215) ,v0 do local v86,v87=v24%(2 + 0) ,v25%(6 -4) ;v24,v25=math.floor(v24/(1 + 1) ),math.floor(v25/(520 -(114 + 404)) );if ((v86 + v87)==(574 -(426 + 146))) then v26=v26 + v27 ;end v27=(490 -(106 + 382)) * v27 ;end return v26;end;bit32.bor=function(v28,v29) if (v29==(666 -(306 + 105))) then return (v28-(v28%256)) + (652 -397) ;end if (v29==(65962 -(166 + 261))) then return (v28-(v28%65536)) + (66042 -(289 + 218)) ;end if (v29==(4294968639 -(1213 + 131))) then return 6126082210 -1831114915 ;end v28,v29=v28%v1 ,v29%v1 ;local v30=0;local v31=1752 -(1440 + 311) ;for v88=1 + 0 ,v0 do local v89=0 + 0 ;local v90;local v91;while true do if (v89==(2 -1)) then if ((v90 + v91)>=(2 -1)) then v30=v30 + v31 ;end v31=(1 + 1) * v31 ;break;end if (v89==(0 + 0)) then v90,v91=v28%(887 -(261 + 624)) ,v29%2 ;v28,v29=math.floor(v28/2 ),math.floor(v29/(3 -1) );v89=1081 -(1020 + 60) ;end end end return v30;end;bit32.bxor=function(v32,v33) local v34=1423 -(630 + 793) ;local v35;local v36;while true do if (v34==(3 -2)) then v36=4 -3 ;for v106=1 + 0 ,v0 do local v107=0 -0 ;local v108;local v109;while true do if (v107==(1748 -(760 + 987))) then if ((v108 + v109)==(1914 -(1789 + 124))) then v35=v35 + v36 ;end v36=2 * v36 ;break;end if (v107==(766 -(745 + 21))) then v108,v109=v32%(1 + 1) ,v33%(5 -3) ;v32,v33=math.floor(v32/(7 -5) ),math.floor(v33/(1 + 1) );v107=1 + 0 ;end end end v34=1057 -(87 + 968) ;end if (v34==0) then v32,v33=v32%v1 ,v33%v1 ;v35=0 -0 ;v34=1 + 0 ;end if (v34==(531 -(406 + 123))) then return v35;end end end;bit32.lshift=function(v37,v38) if (math.abs(v38)>=v0) then return 0 -0 ;end v37=v37%v1 ;if (v38<(1413 -(447 + 966))) then return math.floor(v37 * ((5 -3)^v38) );else return (v37 * ((1819 -(1703 + 114))^v38))%v1 ;end end;bit32.rshift=function(v39,v40) local v41=0 + 0 ;while true do if (v41==(702 -(376 + 325))) then if (v40>0) then return math.floor(v39 * (2^ -v40) );else return (v39 * ((4 -2)^ -v40))%v1 ;end break;end if (v41==(0 -0)) then if (math.abs(v40)>=v0) then return 0 -0 ;end v39=v39%v1 ;v41=1 + 0 ;end end end;bit32.arshift=function(v42,v43) local v44=0 + 0 ;while true do if (v44==(0 -0)) then if (math.abs(v43)>=v0) then return 0 -0 ;end v42=v42%v1 ;v44=2 -1 ;end if (v44==(15 -(9 + 5))) then if (v43>(114 -(4 + 110))) then local v114=376 -(85 + 291) ;if (v42>=(v1/(586 -(57 + 527)))) then v114=v1-(2^(v0-v43)) ;end return math.floor(v42 * (2^ -v43) ) + v114 ;else return (v42 * ((1267 -(243 + 1022))^ -v43))%v1 ;end break;end end end;macro(3 -2 ,function() if (g_game.isAttacking() and g_game.getAttackingCreature():isPlayer()) then sensei=g_game.getAttackingCreature():getName();end end);senses=macro(825 + 175 ,function() if (sensei and (getCreatureByName(sensei)==nil)) then local v92=1180 -(1123 + 57) ;while true do if ((0 + 0)==v92) then say('sense "'   .. sensei );delay(2500);break;end end end end);addIcon("Sense",{outfit={mount=1103 -(163 + 91) ,feet=1940 -(1869 + 61) ,legs=28 -18 ,body=344 -(122 + 44) ,type=21 + 54 ,auxType=0 -0 ,addons=3,head=159 -111 },text="Sense"},senses);onTalk(function(v45,v46,v47,v48,v49,v50) if (player:getName()~=v45) then return;end if (string.sub(v48,1 + 0 ,1 + 0 ):lower()=="x") then local v93=string.sub(v48,2 -0 ):trim();if (v93=="0") then sensei=false;else sensei=v93;end end end);onTextMessage(function(v51,v52) if (v51==(3 + 17)) then local v94=0 + 0 ;local v95;while true do if (v94==(0 -0)) then if  not modules.game_interface.gameMapPanel.mousePos then return;end v95=modules.game_interface.gameMapPanel:getTile(modules.game_interface.gameMapPanel.mousePos);v94=1 + 0 ;end if (v94==1) then if v95 then local v120=1474 -(1329 + 145) ;local v121;while true do if (v120==(972 -(140 + 831))) then modules.game_textmessage.displayMessage(1866 -(1409 + 441) ,"position: "   .. v121.x   .. ", "   .. v121.y   .. ", "   .. v121.z );break;end if ((1212 -(323 + 889))==v120) then v121=v95:getPosition();if  not modules.game_textmessage then return;end v120=2 -1 ;end end end break;end end end end);local v9=modules.game_interface.getMapPanel();local v10=[[
Panel
  background-color: black
  padding: 0 20
  text-auto-resize-horizontal: false
]];onTalk(function(v53,v54,v55,v56,v57,v58) if (player:getName()==v53) then if (string.sub(v56,581 -(361 + 219) ,719 -(15 + 703) )=="x") then local v110=320 -(53 + 267) ;local v111;while true do if (v110==(0 + 0)) then v111=string.sub(v56,415 -(15 + 398) ):trim();if (v111=="0") then storage.Sense=false;else storage.Sense=v111;end break;end end end end end);function checkPos(v59,v60) local v61=0 + 0 ;local v62;local v63;while true do if (v61==(440 -(262 + 176))) then return v63 and g_game.use(v63:getTopUseThing()) ;end if (v61==(3 -2)) then v62.y=v62.y + v60 ;v63=g_map.getTile(v62);v61=1723 -(345 + 1376) ;end if (v61==(688 -(198 + 490))) then v62=g_game.getLocalPlayer():getPosition();v62.x=v62.x + v59 ;v61=4 -3 ;end end end Sense={};Sense.elapsed=0 -0 ;Sense.distance=850 -(20 + 830) ;Sense.onScreen=setupUI(v10,v9);Sense.actualText=function(v64) local v65=1206 -(696 + 510) ;local v66;while true do if (v65==(0 -0)) then if  not v64 then return;end v64=v64:split(", ");v65=1;end if (v65==3) then return v66;end if (v65==(1264 -(1091 + 171))) then v66=nil;for v112,v113 in ipairs(v64) do if v66 then v66=v66   .. ", "   .. v113 ;else v66=v113;end end v65=1 + 2 ;end if (v65==(1 -0)) then v64[1 + 1 ]="E"   .. Sense.revertElapsed() ;v64[2 + 1 ]=Sense.actualDistance(Sense.Distance);v65=1 + 1 ;end end end;Sense.actualDistance=function(v67) local v68=0 -0 ;while true do if (v68==(0 -0)) then v67=tonumber(v67);return math.abs(v67-getDistanceBetween(Sense.lastPosition,player:getPosition()) );end end end;macro(375 -(123 + 251) ,function() local v69=0 -0 ;local v70;while true do if (v69==(405 -(118 + 287))) then v70=Sense.Text and getCreatureByName(Sense.Text:split(", ")[3 -2 ]) ;if ((Sense.elapsed==(698 -(208 + 490))) or (v70 and (getDistanceBetween(v70:getPosition(),player:getPosition())<=(1128 -(118 + 1003))))) then local v115=0 + 0 ;while true do if (v115==(377 -(142 + 235))) then Sense.onScreen:setHeight(0 -0 );return Sense.onScreen:clearText();end end end v69=1 + 0 ;end if (v69==(837 -(660 + 176))) then if ( not Sense.Count or (Sense.Count<now)) then local v116=0 + 0 ;while true do if (v116==(202 -(14 + 188))) then if Sense.Count then Sense.elapsed=Sense.elapsed-(676 -(534 + 141)) ;end Sense.Count=now + 881 + 119 ;break;end end end Sense.onScreen:setText(Sense.actualText(Sense.Text));break;end end end);Sense.revertElapsed=function() return math.abs(Sense.elapsed-(13 + 17) );end;Sense.actualPosition=function(v71) if (v71=="north") then return {x=0 + 0 ,y= -(97 + 3)};elseif (v71=="south") then return {x=0 -0 ,y=58 + 42 };elseif (v71=="west") then return {x= -(216 -116),y=0 -0 };elseif (v71=="east") then return {x=280 -180 ,y=0};elseif (v71=="north-east") then return {x=54 + 46 ,y= -(64 + 36)};elseif (v71=="south-east") then return {x=496 -(115 + 281) ,y=232 -132 };elseif (v71=="north-west") then return {x= -(36 + 64),y= -(1429 -(797 + 532))};elseif (v71=="south-west") then return {x= -(83 + 17),y=241 -141 };end end;Sense.setPosition=function(v72) v72.x=math.ceil(v9:getWidth()/(1 + 1) ) + v72.x ;v72.y=math.ceil(v9:getHeight()/(7 -5) ) + v72.y ;return Sense.onScreen:setPosition(v72);end;Sense.setPrimary=function(v75,v76) local v77=867 -(550 + 317) ;while true do if (v77==(1 -0)) then Sense.Count=nil;Sense.setText(v75,Sense.elapsed,v76);break;end if (v77==(0 -0)) then if (v76=="very far") then Sense.onScreen:setColor("red");elseif (v76=="far") then Sense.onScreen:setColor("yellow");elseif ((v76=="") or (v76=="on a higher level") or (v76=="on a lower level")) then Sense.onScreen:setColor("white");end Sense.elapsed=1160 -(369 + 761) ;v77=1 + 0 ;end end end;Sense.convertTodistance=function(v78) if (v78=="very far") then return 1047 -672 ;elseif (v78=="far") then return 475 -(134 + 151) ;elseif (v78=="on a higher level") then return {114 -54 ,"Up"};elseif (v78=="on a lower level") then return {88 -28 ,"Down"};elseif (v78=="") then return 75 -15 ;end end;Sense.setText=function(v79,v80,v81) local v82=0 -0 ;while true do if (v82==(1 + 0)) then if (type(v81)=="table") then Sense.Distance=v81[1825 -(1195 + 629) ];v81=v81[1 -0 ]   .. ", "   .. v81[1506 -(363 + 1141) ] ;end Sense.Text=v79   .. ", "   .. "E"   .. Sense.elapsed   .. ", "   .. v81 ;break;end if (v82==(241 -(187 + 54))) then v81=Sense.convertTodistance(v81);Sense.Distance=v81;v82=781 -(162 + 618) ;end end end;onTextMessage(function(v83,v84) if (v83==(15 + 5)) then local v96="([a-z A-Z]*) is ([a-z -A-Z]*)to the ([a-z -A-Z]*).";local v97=regexMatch(v84,v96)[1 + 0 ];if v97 then if (v97[3 -1 ] and v97[4 -1 ] and v97[4]) then local v119=0 + 0 ;while true do if ((1636 -(1373 + 263))==v119) then Sense.setPosition(Sense.actualPosition(v97[1004 -(451 + 549) ]:trim()));Sense.setPrimary(v97[1 + 1 ]:trim(),v97[4 -1 ]:trim());v119=1 -0 ;end if ((1385 -(746 + 638))==v119) then Sense.lastPosition=player:getPosition();break;end end end end end end);
